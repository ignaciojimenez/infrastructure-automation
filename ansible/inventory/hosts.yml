---
# Unified Multi-Platform Inventory
# Hosts inherit smart defaults:
#   - ansible_host: inventory_hostname (key name)
#   - ansible_user: current user
#   - platform_type: from parent group
# Only override when different!

all:
  children:
    # ========== DEBIAN-BASED SYSTEMS ==========
    debian_hosts:
      vars:
        os_family: debian
        package_manager: apt
        service_manager: systemd
        ansible_python_interpreter: /usr/bin/python3
        infrastructure_group: "{{ infrastructure_user }}"  # Debian uses user's group
        
      children:
        # Raspberry Pi hosts
        raspberrypi:
          vars:
            platform_type: raspberrypi
          hosts:
            cobra:
              primary_function: media
            hifipi:
              primary_function: audio_playback
            vinylstreamer:
              primary_function: audio_streaming
            dockassist:
              primary_function: homeassistant
              
        # LXC containers
        lxc_containers:
          vars:
            platform_type: lxc
          hosts:
            pihole-lxc:
              ansible_host: pihole  # Different from key
              container_id: 102
              primary_function: dns
            unifi-lxc:
              ansible_host: unifi  # Different from key
              container_id: 101
              primary_function: network_controller
              
        # Proxmox host
        proxmox_hosts:
          vars:
            platform_type: proxmox
          hosts:
            proxmox:
              ansible_host: cwwk  # Different from key
              primary_function: hypervisor
              
    # ========== FREEBSD-BASED SYSTEMS ==========
    freebsd_hosts:
      vars:
        os_family: freebsd
        package_manager: pkg
        service_manager: rc
        ansible_python_interpreter: /usr/local/bin/python3
        platform_type: opnsense
        infrastructure_group: wheel  # FreeBSD uses wheel group
      hosts:
        opnsense:
          vm_id: 100  # Runs as VM on Proxmox
          scripts_dir: /usr/local/bin
          primary_function: firewall
